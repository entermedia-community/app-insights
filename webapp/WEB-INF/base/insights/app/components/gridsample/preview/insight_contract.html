#set( $searchtype = $context.getRequestParameter("searchtype"))
#set( $id = $context.getRequestParameter("id"))
#set( $data = $hits.findData("id",$id))

#if( !$data)
	#set( $data  = $mediaarchive.getData($searchtype,$id) )
#end

$context.putPageValue("data", $data)

#set($ibmmodule = $mediaarchive.getData("module", $searchtype))


<div class="modal-content modal-data-details modal-insight ${ibmmodule.id}-modal">
	
<div class="modal-close">
     <button type="button" class="close" data-dismiss="modal" aria-label="Close">
       <span aria-hidden="true">&times;</span>
     </button>
</div>

<div class="modal-body modal-body-insight">

<div class="ibmpreview">

<h3 class="modal-insight-datatype"><img src="$apphome/theme/images/insights/icon_${ibmmodule.id}.svg"> $ibmmodule</h3>

<div class="modal-body-insight-header">
	<h2 class="modal-title">$!data.ibmtitle</h2>
</div>

<div class="insight-columns" >
	#if($data.ibmuploaded_by)<h4>$data.ibmuploaded_by - [[Uploader]]<h4>#end
	
	#if($data.ibmpublicationDate)<p>[[Publication Date]]: $data.ibmpublicationDate</p>#end

</div>
	
<ul class="nav nav-tabs">
  <li class="nav-item">
    <a class="nav-link active" data-toggle="tab" href="#summary">Summary</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#snippet">Snippet</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#organizations">Organizations</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#people">People</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" data-toggle="tab" href="#jobs">Jobs</a>
  </li>
</ul>

<div class="tab-content">	
	<div id="summary"  class="tab-pane active">	
		<div class="ibmtext"> 
		--Summary--
		</div>
	</div>
	<div id="snippet"  class="tab-pane">	
		#set($textsize = $data.fulltext.length())	
		<div id="ibmtext_$data.id" class="ibmtext #if($textsize > 600) seemoreclosed #end">
		$!hits.highlight($data,"fulltext")
		</div>
		#if($textsize > 600) <div class="ibmtextseemore"><a href="#" class="seemorelink" data-seemore="ibmtext_$data.id">[[more]]</a></div><div class="clearfix"></div> #end
	</div>
	<div id="organizations"  class="tab-pane">
		Organizations
	</div>
	<div id="people"  class="tab-pane">
		$data.ibmentityperson
	</div>
	<div id="jobs"  class="tab-pane">
		Jobs
	</div>
</div>

	$pages.include("$componenthome/gridsample/preview/tags.html",$context)
	
	$pages.include("$componenthome/gridsample/favorites.html?moduleid=$module.id&id=$data.id&searchtype=$searchtype", $context)
	
	<div class="preview-nav float-left">
	#set( $index = $hits.indexOfId($data.id))
	#set( $previous = false )
	#set( $previous = $hits.previous($index))
	#set( $next = false )
	#set( $next = $hits.next($index))  
	#if( $previous)
		#set($previewurl = "$componenthome/gridsample/preview/${searchtype}.html?id=$previous&searchtype=$searchtype&hitssessionid=$hits.sessionId")
		<a href="$previewurl" class="emdialog boxnavlink" data-hideheader="true" title="Previos"> <i class="fas fa-caret-left"></i></a>
	#end
	#if( $next)
		#set($previewurl = "$componenthome/gridsample/preview/${searchtype}.html?id=$next&searchtype=$searchtype&hitssessionid=$hits.sessionId")
		<a href="$previewurl" class="emdialog boxnavlink" data-hideheader="true" title="Next"><i class="fas fa-caret-right"></i> </a>
	#end
	</div>
	
	#if($data.ibmdocument_url)<div class="float-right"><a href="$data.ibmdocument_url">[[Download Document]]</a></div>#end
</div>
</div>
</div>